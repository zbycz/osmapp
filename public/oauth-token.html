<!DOCTYPE html>
<html>
  <head>
    <title>OsmAPP auth popup</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <div id="noredirect">
      <h1>OsmAPP auth popup</h1>
      <p>
        [en] If this popup doesn't close automatically, it is probably an error.
        Please, let us know at
        <a href="https://github.com/zbycz/osmapp/issues">the issue tracker</a>.
      </p>

      <p>
        [cs] Pokud se toto okno automaticky nezavře, pravděpodobně došlo k chybě.
        Prosím, dejte nám vědět
        <a href="https://github.com/zbycz/osmapp/issues">zde</a>.
      </p>

      <img src="/osmapp/logo/osmapp.svg" />
    </div>

    <script>
      document.getElementById('noredirect').style.display = 'none';
      setTimeout(() => {
        document.getElementById('noredirect').style.display = 'block';
      }, 10000);

      if (new URLSearchParams(location.search).has("code")) {
        new BroadcastChannel("osm-api-auth-complete").postMessage(location.href);
        window.close();
      }
    </script>
  </body>
</html>
