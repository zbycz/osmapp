import {
  buildings3dBase,
  buildings3dExtrusion,
} from './layers/buildings3dLayers';
import { GLYPHS, OSMAPP_SOURCES, OSMAPP_SPRITE } from '../consts';
import { motorwayConstruction } from './layers/contruction';
import { overpassLayers } from './layers/overpassLayers';
import { cliffsLayers } from './layers/cliffsLayers';
import { StyleSpecification } from 'maplibre-gl';
import { LayerSpecification } from '@maplibre/maplibre-gl-style-spec';

// Maptiler Outdoor style is copyrighted â€“ only to be used with valid Maptiler subscription
// https://www.maptiler.com/maps/outdoor/

const removeIconOpacity = (layer: any): LayerSpecification[] => {
  const stepSpec = layer.paint['icon-opacity'].slice(5);
  delete layer.paint['icon-opacity'];

  const newLayers: LayerSpecification[] = [];

  for (let i = 0; i < stepSpec.length; i += 2) {
    const minZoom = stepSpec[i] as number;
    const expression = stepSpec[i + 1];

    const clone = JSON.parse(JSON.stringify(layer));
    clone.id = `${layer.id}-minzoom${minZoom}`;
    clone.minzoom = minZoom;
    if (expression !== 1) {
      clone.filter.push(['in', 'class', ...expression[2]]);
    }
    newLayers.push(clone);
  }

  return newLayers;
};

const debug2 = (layers: StyleSpecification) => {
  // console.log(layers.filter(l=>l['source-layer'] === 'poi' || l['source-layer'] === 'outdoor_poi'));

  return layers;
};

export const outdoor2Style = debug2({
  version: 8,
  id: 'outdoor-v2',
  name: 'Outdoor',
  zoom: 7,
  pitch: 0,
  center: [0, 0],
  glyphs: GLYPHS,
  layers: [
    {
      id: 'Background',
      type: 'background',
      minzoom: 0,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'background-color': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          5,
          'hsl(86, 39%, 93%)',
          14,
          'hsl(120, 4%, 95%)',
        ],
      },
    },
    motorwayConstruction,
    {
      id: 'Scrub',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'globallandcover',
      maxzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': true,
        'fill-color': 'hsl(73, 36%, 85%)',
        'fill-opacity': 1,
      },
      filter: ['==', 'class', 'scrub'],
    },
    {
      id: 'Tree',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'globallandcover',
      minzoom: 0,
      maxzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(103, 42%, 87%)',
        'fill-opacity': 1,
      },
      filter: ['==', 'class', 'tree'],
    },
    {
      id: 'Forest',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'globallandcover',
      minzoom: 0,
      maxzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(90, 39%, 80%)',
        'fill-opacity': 1,
      },
      filter: ['in', 'class', 'forest', 'tree'],
    },
    {
      id: 'Wood',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landcover',
      minzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(90, 39%, 80%)',
      },
      metadata: {},
      filter: ['==', 'class', 'wood'],
    },
    {
      id: 'Grass',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landcover',
      minzoom: 0,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsla(81, 69%, 73%, 0.3)',
      },
      metadata: {},
      filter: ['==', 'class', 'grass'],
    },
    {
      id: 'Sand',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landcover',
      minzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': false,
        'fill-color': 'hsl(53, 62%, 88%)',
      },
      metadata: {},
      filter: ['==', 'class', 'sand'],
    },
    {
      id: 'Glacier',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landcover',
      minzoom: 0,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': false,
        'fill-color': 'hsl(347, 0%, 100%)',
        'fill-opacity': 1,
      },
      metadata: {},
      filter: ['==', 'class', 'ice'],
    },
    {
      id: 'Residential',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      maxzoom: 16,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': {
          stops: [
            [6, 'hsla(0, 0%, 71%, 0.3)'],
            [16, 'hsla(0, 0%, 89%, 0.3)'],
          ],
        },
      },
      filter: ['in', 'class', 'residential', 'suburb', 'neighbourhood'],
    },
    {
      id: 'Industrial',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(31, 54%, 92%)',
        'fill-opacity': 0.5,
      },
      metadata: {},
      filter: ['in', 'class', 'industrial', 'quarry'],
    },
    {
      id: 'Commercial',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(31, 54%, 92%)',
        'fill-opacity': 0.5,
      },
      metadata: {},
      filter: ['in', 'class', 'commercial', 'retail', 'stadium'],
    },
    {
      id: 'Military',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(76, 17%, 60%)',
        'fill-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          11,
          0.25,
          16,
          0.15,
          18,
          0,
        ],
        'fill-outline-color': 'hsl(24, 100%, 42%)',
      },
      metadata: {},
      filter: ['==', 'class', 'military'],
    },
    {
      id: 'Cemetery',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(89, 16%, 81%)',
        'fill-opacity': 1,
      },
      metadata: {},
      filter: ['==', 'class', 'cemetery'],
    },
    {
      id: 'Hospital',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(322, 50%, 91%)',
        'fill-opacity': 0.5,
      },
      metadata: {},
      filter: ['==', 'class', 'hospital'],
    },
    {
      id: 'Stadium',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {},
      paint: {
        'fill-color': 'hsl(95, 57%, 91%)',
      },
      filter: ['in', 'class', 'pitch', 'playground', 'stadium'],
    },
    {
      id: 'Hillshade',
      type: 'hillshade',
      source: 'terrainHillshade', // TODO osmapp
      minzoom: 3,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'hillshade-accent-color': 'hsl(98, 35%, 86%)',
        'hillshade-exaggeration': {
          stops: [
            [6, 0.4],
            [14, 0.35],
            [18, 0.25],
          ],
        },
        'hillshade-highlight-color': 'hsl(20, 13%, 68%)',
        'hillshade-shadow-color': [
          'interpolate',
          ['linear'],
          ['zoom'],
          0,
          'hsl(9, 3%, 41%)',
          13,
          'hsl(9, 0%, 0%)',
          15,
          'hsl(9, 3%, 41%)',
        ],
      },
    },
    {
      id: 'Park',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'park',
      minzoom: 6,
      maxzoom: 12,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': true,
        'fill-color': [
          'interpolate',
          ['linear'],
          ['zoom'],
          8,
          'hsl(120, 92%, 90%)',
          9,
          'hsl(120, 94%, 86%)',
        ],
        'fill-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          6,
          0.4,
          10,
          0.3,
          11,
          0.1,
        ],
      },
      filter: ['==', '$type', 'Polygon'],
    },
    {
      id: 'Park outline',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'park',
      minzoom: 8,
      maxzoom: 16,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-blur': 1,
        'line-color': 'hsl(119, 68%, 77%)',
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          5,
          0.5,
          11,
          0.4,
          17,
          0,
        ],
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          8,
          1,
          10,
          1.5,
          11,
          3,
          15,
          8,
        ],
      },
      filter: ['==', '$type', 'Polygon'],
    },
    {
      id: 'Contour index',
      type: 'line',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(36, 45%, 45%, 0.8)',
        'line-opacity': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          9,
          0.3,
          14,
          0.4,
          18,
          0.5,
        ],
        'line-width': ['interpolate', ['linear'], ['zoom'], 10, 1, 14, 1.5],
      },
      filter: ['all', ['in', 'nth_line', 5, 10], ['!has', 'glacier']],
    },
    {
      id: 'Glacier contour index',
      type: 'line',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 9,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(200, 100%, 73%, 0.8)',
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0.3,
          14,
          0.4,
          18,
          0.5,
        ],
        'line-width': {
          stops: [
            [10, 0.8],
            [14, 1.3],
          ],
        },
      },
      filter: ['all', ['in', 'nth_line', 5, 10], ['==', 'glacier', 1]],
    },
    {
      id: 'Contour',
      type: 'line',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 9,
      layout: {
        'line-cap': 'square',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(36, 45%, 50%)',
        'line-opacity': [
          'step',
          ['zoom'],
          ['match', ['get', 'nth_line'], 0, 0, 0.3],
          15,
          0.3,
        ],
        'line-width': 0.8,
      },
      filter: ['all', ['!in', 'nth_line', 5, 10], ['!has', 'glacier']],
    },
    {
      id: 'Glacier contour',
      type: 'line',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 9,
      layout: {
        'line-cap': 'square',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(200, 100%, 80%)',
        'line-opacity': [
          'step',
          ['zoom'],
          ['match', ['get', 'nth_line'], 0, 0, 0.3],
          15,
          0.3,
        ],
        'line-width': 0.8,
      },
      filter: ['all', ['!in', 'nth_line', 5, 10], ['==', 'glacier', 1]],
    },
    {
      id: 'Cliff line',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 13,
      paint: {
        'line-color': 'hsl(0, 10%, 55%)',
        'line-opacity': ['interpolate', ['linear'], ['zoom'], 13, 0.5, 17, 0.8],
        'line-width': ['interpolate', ['linear'], ['zoom'], 15, 0.5, 22, 4],
      },
      filter: ['==', ['geometry-type'], 'LineString'],
    },
    {
      id: 'Cliff',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 13,
      layout: {
        'line-join': 'miter',
      },
      paint: {
        'line-color': 'hsl(0, 10%, 55%)',
        'line-dasharray': [0.2, 1],
        'line-offset': ['interpolate', ['linear'], ['zoom'], 16, 1.2, 22, 5],
        'line-opacity': ['interpolate', ['linear'], ['zoom'], 13, 0.3, 17, 0.6],
        'line-width': ['interpolate', ['linear'], ['zoom'], 16, 2, 22, 10],
      },
      filter: ['==', ['geometry-type'], 'LineString'],
    },
    {
      id: 'Contour labels',
      type: 'symbol',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 12,
      layout: {
        'symbol-avoid-edges': true,
        'symbol-placement': 'line',
        'text-allow-overlap': false,
        'text-field': '{height}',
        'text-font': ['Roboto Medium Italic', 'Noto Sans Italic'],
        'text-ignore-placement': false,
        'text-padding': 1,
        'text-rotation-alignment': 'map',
        'text-size': {
          base: 1,
          stops: [
            [12, 8],
            [20, 12],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(36, 45%, 31%)',
        'icon-halo-color': 'hsla(0, 0%, 100%, 0.8)',
        'icon-halo-width': 0.8,
        'icon-opacity': 0.8,
        'text-color': 'hsl(36, 45%, 31%)',
        'text-halo-blur': 1,
        'text-halo-color': 'hsla(0, 0%, 100%, 0.8)',
        'text-halo-width': 0.8,
        'text-opacity': 0.8,
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['\u003E', 'height', 0],
        ['in', 'nth_line', 5, 10],
        ['!has', 'glacier'],
      ],
    },
    {
      id: 'Glacier contour labels',
      type: 'symbol',
      source: 'contours',
      'source-layer': 'contour',
      minzoom: 13,
      layout: {
        'symbol-avoid-edges': true,
        'symbol-placement': 'line',
        'text-allow-overlap': false,
        'text-field': '{height}',
        'text-font': ['Roboto Medium Italic', 'Noto Sans Italic'],
        'text-ignore-placement': false,
        'text-padding': 1,
        'text-rotation-alignment': 'map',
        'text-size': {
          base: 1,
          stops: [
            [12, 8],
            [20, 12],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(200, 15%, 47%)',
        'icon-halo-color': 'hsla(0, 0%, 100%, 0.8)',
        'icon-halo-width': 0.8,
        'icon-opacity': 0.8,
        'text-color': 'hsl(200, 15%, 47%)',
        'text-halo-blur': 1,
        'text-halo-color': 'hsla(0, 0%, 100%, 0.8)',
        'text-halo-width': 0.8,
        'text-opacity': 0.8,
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'nth_line', 10, 5],
        ['\u003E', 'height', 0],
        ['has', 'glacier'],
      ],
    },
    {
      id: 'River tunnel',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'waterway',
      minzoom: 3,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(206, 78%, 75%)',
        'line-dasharray': [2, 4],
        'line-opacity': 0.7,
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          0,
          0.5,
          4,
          1,
          13,
          1.25,
          16,
          1.5,
          22,
          6,
        ],
      },
      filter: ['==', 'brunnel', 'tunnel'],
    },
    {
      id: 'River',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'waterway',
      minzoom: 3,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(206, 78%, 75%)',
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          0,
          0.5,
          4,
          1,
          13,
          1.25,
          16,
          1.5,
          22,
          6,
        ],
      },
      metadata: {},
      filter: ['!=', 'brunnel', 'tunnel'],
    },
    {
      id: 'Water',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'water',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': [
          'interpolate',
          ['linear'],
          ['zoom'],
          6,
          'hsl(206, 78%, 80%)',
          22,
          'hsl(206, 78%, 75%)',
        ],
        'fill-opacity': ['match', ['get', 'intermittent'], 1, 0.85, 1],
      },
    },
    ...cliffsLayers,
    {
      id: 'Aeroway',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'aeroway',
      minzoom: 11,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-color': 'hsl(0, 0%, 89%)',
        'fill-opacity': 1,
      },
      metadata: {},
      filter: ['==', '$type', 'Polygon'],
    },
    {
      id: 'Runway',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'aeroway',
      minzoom: 11,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 100%, 100%)',
        'line-width': {
          base: 1.2,
          stops: [
            [11, 3],
            [20, 16],
          ],
        },
      },
      metadata: {},
      filter: ['all', ['==', '$type', 'LineString'], ['==', 'class', 'runway']],
    },
    {
      id: 'Taxiway',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'aeroway',
      minzoom: 11,
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 100%, 100%)',
        'line-width': {
          base: 1.2,
          stops: [
            [11, 0.5],
            [20, 6],
          ],
        },
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'taxiway'],
      ],
    },
    ...buildings3dBase,
    {
      id: 'Ferry',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 6,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(217, 49%, 69%)',
        'line-dasharray': [2, 2],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          6,
          0.5,
          7,
          0.8,
          8,
          1,
        ],
        'line-width': {
          stops: [
            [10, 0.5],
            [14, 1.1],
          ],
        },
      },
      filter: [
        'all',
        ['in', '$type', 'LineString', 'Polygon'],
        ['==', 'class', 'ferry'],
      ],
    },
    {
      id: 'Tunnel path',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 13,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(23, 57%, 24%, 0.3)',
        'line-dasharray': [2, 2],
        'line-width': {
          base: 1.2,
          stops: [
            [14, 0.5],
            [16, 1],
            [20, 1.5],
          ],
        },
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'class', 'path', 'pedestrian', 'track'],
        ['==', 'brunnel', 'tunnel'],
      ],
    },
    {
      id: 'Tunnel',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 5,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(0, 100%, 100%, 0.3)',
        'line-width': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          5,
          ['match', ['get', 'class'], 'motorway', 0.5, 0],
          7,
          ['match', ['get', 'class'], 'motorway', 1, 0],
          9,
          ['match', ['get', 'class'], 'motorway', 2, 0],
          14,
          [
            'match',
            ['get', 'class'],
            'motorway',
            5,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            3,
            0.5,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            'motorway',
            15,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            11,
            10,
          ],
          18,
          [
            'match',
            ['get', 'class'],
            'motorway',
            16,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            12,
            11,
          ],
          20,
          [
            'match',
            ['get', 'class'],
            'motorway',
            17,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            13,
            12,
          ],
          22,
          [
            'match',
            ['get', 'class'],
            'motorway',
            18,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            14,
            ['minor', 'service', 'track', 'pier', 'raceway'],
            13,
            7,
          ],
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'brunnel', 'tunnel'],
        [
          'in',
          'class',
          'minor',
          'motorway',
          'pier',
          'primary',
          'raceway',
          'secondary',
          'service',
          'tertiary',
          'trunk',
        ],
      ],
    },
    {
      id: 'Railway tunnel',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 50%)',
        'line-opacity': 0.5,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          8,
          0.75,
          10,
          2,
          14,
          1.5,
          16,
          4,
        ],
      },
      filter: [
        'all',
        ['==', 'brunnel', 'tunnel'],
        ['in', 'class', 'rail'],
        ['!=', 'subclass', 'funicular'],
        ['!=', 'service', 'yard'],
      ],
    },
    {
      id: 'Railway tunnel dash',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 96%)',
        'line-dasharray': [
          'step',
          ['zoom'],
          ['literal', [2, 2]],
          9,
          ['literal', [2.5, 3]],
        ],
        'line-opacity': 0.5,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          8,
          0,
          9,
          0.5,
          14,
          1,
          16,
          4,
        ],
      },
      filter: [
        'all',
        ['==', 'brunnel', 'tunnel'],
        ['==', 'class', 'rail'],
        ['!=', 'subclass', 'funicular'],
        ['!=', 'service', 'yard'],
      ],
    },
    {
      id: 'Bridge',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': true,
        'fill-color': 'hsla(0, 0%, 95%, 0.5)',
        'fill-outline-color': 'hsla(0, 0%, 95%, 0.5)',
      },
      metadata: {},
      filter: ['all', ['==', '$type', 'Polygon'], ['==', 'brunnel', 'bridge']],
    },
    {
      id: 'Pier',
      type: 'fill',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'fill-antialias': true,
        'fill-color': 'hsl(120, 4%, 95%)',
      },
      metadata: {},
      filter: ['all', ['==', '$type', 'Polygon'], ['==', 'class', 'pier']],
    },
    {
      id: 'Road network',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 5,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 100%, 100%)',
        'line-width': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          5,
          ['match', ['get', 'class'], 'motorway', 0.5, 0],
          7,
          ['match', ['get', 'class'], ['motorway', 'trunk'], 1, 0],
          9,
          ['match', ['get', 'class'], ['motorway', 'trunk'], 2, 0],
          14,
          [
            'match',
            ['get', 'class'],
            'motorway',
            5,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            1,
            0.5,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            'motorway',
            10,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            4.6,
            3,
          ],
          18,
          [
            'match',
            ['get', 'class'],
            'motorway',
            12,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            5,
            7,
          ],
          20,
          [
            'match',
            ['get', 'class'],
            'motorway',
            15,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            6.4,
            8,
          ],
          22,
          [
            'match',
            ['get', 'class'],
            'motorway',
            16,
            ['primary', 'trunk', 'secondary', 'tertiary'],
            12,
            ['minor', 'service', 'pier', 'raceway'],
            11,
            9,
          ],
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['!=', 'brunnel', 'tunnel'],
        [
          '!in',
          'class',
          'aerialway',
          'bridge',
          'bus_guideway',
          'busway',
          'ferry',
          'minor_construction',
          'motorway_construction',
          'path',
          'path_construction',
          'primary_construction',
          'raceway_construction',
          'rail',
          'secondary_construction',
          'service_construction',
          'tertiary_construction',
          'track',
          'track_construction',
          'transit',
          'trunk_construction',
        ],
      ],
    },
    {
      id: 'Steps',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 15,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(24, 10%, 60%)',
        'line-dasharray': [0.5, 1],
        'line-width': {
          base: 1.4,
          stops: [
            [14.5, 0],
            [15, 3],
            [20, 8],
          ],
        },
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'path'],
        ['!=', 'brunnel', 'tunnel'],
        ['==', 'subclass', 'steps'],
      ],
    },
    {
      id: 'Track',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(24, 10%, 60%)',
        'line-dasharray': [5, 2],
        'line-width': [
          'interpolate',
          ['exponential', 1.2],
          ['zoom'],
          13,
          1,
          16,
          1,
          20,
          2,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'track'],
        ['!=', 'brunnel', 'tunnel'],
      ],
    },
    {
      id: 'Path',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(24, 10%, 60%)',
        'line-dasharray': [5, 2],
        'line-width': [
          'interpolate',
          ['exponential', 1.2],
          ['zoom'],
          13,
          0.5,
          16,
          1,
          20,
          2,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'path'],
        ['!=', 'subclass', 'steps'],
        ['!=', 'surface', 'paved'],
        ['!=', 'brunnel', 'tunnel'],
      ],
    },
    {
      id: 'Pedestrian outline',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 13,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 100%, 100%)',
        'line-width': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          13,
          0.5,
          16,
          3,
          20,
          8,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'class', 'path', 'pedestrian'],
        ['any', ['in', 'brunnel', 'bridge', 'ford'], ['!has', 'brunnel']],
        ['==', 'surface', 'paved'],
      ],
    },
    {
      id: 'Pedestrian',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 13,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(24, 10%, 49%)',
        'line-dasharray': [1, 1],
        'line-width': {
          base: 1.2,
          stops: [
            [13, 0.5],
            [16, 1.3],
            [20, 2],
          ],
        },
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'class', 'path', 'pedestrian'],
        ['!=', 'brunnel', 'tunnel'],
        ['==', 'surface', 'paved'],
      ],
    },
    {
      id: 'Minor railway',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0,0%,73%)',
        'line-width': {
          base: 1.4,
          stops: [
            [14, 0.4],
            [15, 0.75],
            [20, 2],
          ],
        },
      },
      metadata: {},
      filter: ['in', 'subclass', 'tram', 'light_rail'],
    },
    {
      id: 'Minor railway hatching',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0,0%,73%)',
        'line-dasharray': [0.2, 4],
        'line-width': {
          base: 1.4,
          stops: [
            [14.5, 0],
            [15, 2],
            [20, 6],
          ],
        },
      },
      metadata: {},
      filter: ['in', 'subclass', 'tram', 'light_rail'],
    },
    {
      id: 'Major railway',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 50%)',
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          8,
          0.5,
          10,
          2,
          14,
          1.5,
          16,
          4,
        ],
      },
      filter: [
        'all',
        ['!in', 'brunnel', 'tunnel'],
        ['==', 'class', 'rail'],
        ['!=', 'subclass', 'funicular'],
        ['!=', 'service', 'yard'],
      ],
    },
    {
      id: 'Major railway dash',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      layout: {
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 96%)',
        'line-dasharray': [
          'step',
          ['zoom'],
          ['literal', [2, 2]],
          9,
          ['literal', [2.5, 3]],
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          8,
          0,
          9,
          0.5,
          14,
          1,
          16,
          4,
        ],
      },
      filter: [
        'all',
        ['!in', 'brunnel', 'tunnel'],
        ['==', 'class', 'rail'],
        ['!=', 'subclass', 'funicular'],
        ['!=', 'service', 'yard'],
      ],
    },
    {
      id: 'Military limit',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'landuse',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': {
          stops: [
            [10, 'hsl(80, 30%, 62%)'],
            [16, 'hsl(80, 22%, 41%)'],
          ],
        },
        'line-dasharray': [1, 2],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          1,
          14,
          1.6,
          18,
          3,
          22,
          4,
        ],
      },
      filter: ['==', 'class', 'military'],
    },
    // {
    //   id: 'Building',
    //   type: 'fill',
    //   source: 'maptiler_planet',
    //   'source-layer': 'building',
    //   minzoom: 13,
    //   layout: {
    //     visibility: 'visible',
    //   },
    //   paint: {
    //     'fill-antialias': true,
    //     'fill-color': [
    //       'interpolate',
    //       ['exponential', 1],
    //       ['zoom'],
    //       13,
    //       'hsl(0, 0%, 82%)',
    //       18,
    //       'hsl(0, 0%, 72%)',
    //     ],
    //     'fill-outline-color': 'hsl(0, 0%, 77%)',
    //   },
    // },
    ...buildings3dExtrusion,
    {
      id: 'Trails outline',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 11,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-blur': 0.5,
        'line-color': 'hsla(0, 0%, 100%, 0.75)',
        'line-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          11,
          0,
          14,
          [
            'match',
            ['get', 'color'],
            'orange',
            0.25,
            'purple',
            0.75,
            'black',
            1.25,
            'brown',
            1.75,
            'blue',
            2.25,
            'green',
            2.75,
            'yellow',
            3.25,
            0,
          ],
          18,
          [
            'match',
            ['get', 'color'],
            'orange',
            1,
            'purple',
            2,
            'black',
            3,
            'brown',
            4,
            'blue',
            5,
            'green',
            6,
            'yellow',
            8,
            0,
          ],
        ],
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          11,
          ['case', ['==', ['get', 'color'], null], 0, 2],
          12,
          ['case', ['==', ['get', 'color'], null], 1.5, 3],
          14,
          ['case', ['==', ['get', 'color'], null], 2.5, 4],
          18,
          ['case', ['==', ['get', 'color'], null], 4, 8],
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        [
          'all',
          [
            'any',
            ['!has', 'color'],
            [
              'in',
              'color',
              'black',
              'blue',
              'brown',
              'green',
              'orange',
              'purple',
              'red',
            ],
          ],
          ['in', 'class', 'foot', 'hiking'],
        ],
      ],
    },
    {
      id: 'Bicycle outline',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 11,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(0, 0%, 100%,0.75)',
        'line-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          13,
          0,
          14,
          -1,
          17,
          -7,
        ],
        'line-opacity': [
          'step',
          ['zoom'],
          0,
          6,
          ['match', ['get', 'network'], ['icn', 'ncn'], 1, 0],
          13,
          1,
        ],
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          11,
          3,
          14,
          4,
          15,
          4.5,
          18,
          6,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'bicycle'],
        ['!=', 'network', ''],
      ],
    },
    {
      id: 'Other trails',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(24, 10%, 60%)',
        'line-dasharray': [5, 2],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1.2],
          ['zoom'],
          13,
          0.75,
          16,
          1,
          20,
          2,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['!has', 'color'],
        ['!in', 'class', 'bicycle', 'horse', 'via_ferrata', 'wheelchair'],
      ],
    },
    {
      id: 'Bicycle local',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 11,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(306, 80%, 64%)',
        'line-dasharray': [1.5, 2],
        'line-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          13,
          0,
          14,
          -1,
          17,
          -7,
        ],
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0.5,
          14,
          2,
          18,
          3,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'bicycle'],
        ['!in', 'network', 'icn', 'ncn', ''],
      ],
    },
    {
      id: 'Yellow trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': {
          stops: [
            [9, 1],
            [14, 3],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(58, 100%, 50%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          3.25,
          18,
          8,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'yellow'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Green trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(95, 66%, 38%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          2.75,
          18,
          6,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'green'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Blue trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': {
          stops: [
            [9, 2],
            [14, 3],
          ],
        },
        'line-round-limit': 1.05,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(217, 71%, 51%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          2.25,
          18,
          5,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'blue'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Brown trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(26, 39%, 41%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          1.75,
          18,
          4,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'brown'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Black trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 18%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          1.25,
          18,
          3,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'black'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Purple trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': {
          stops: [
            [9, 8],
            [14, 3],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(281, 66%, 59%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          0.75,
          18,
          2,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'purple'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Orange trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': {
          stops: [
            [9, 8],
            [12, 12],
            [13, 16],
            [14, 3],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(35, 100%, 49%)',
        'line-offset': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          0,
          14,
          0.75,
          18,
          1,
        ],
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'orange'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Red trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 10,
      layout: {
        'line-cap': 'round',
        'line-join': 'bevel',
        'line-miter-limit': {
          stops: [
            [9, 1],
            [14, 3],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(10, 100%, 50%)',
        'line-offset': 0,
        'line-opacity': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          0,
          10,
          0.2,
          11,
          1,
        ],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'color', 'red'],
        ['!=', 'class', 'bicycle'],
      ],
    },
    {
      id: 'Longdistance trail outline',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 5,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsla(0, 100%, 100%, 0.75)',
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          5,
          0,
          8,
          2,
          14,
          4,
          18,
          8,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'network', 'iwn', 'nwn'],
        ['has', 'ref'],
      ],
    },
    {
      id: 'Longdistance trail',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 5,
      maxzoom: 22,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': [
          'interpolate',
          ['linear'],
          ['zoom'],
          10,
          'hsl(10, 80%, 64%)',
          14,
          'hsl(10, 98%, 41%)',
        ],
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          5,
          0.5,
          8,
          1.5,
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'network', 'iwn', 'nwn'],
        ['has', 'ref'],
      ],
    },
    {
      id: 'Via ferrata outline',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(10, 98%, 41%)',
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          14,
          1.7,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'via_ferrata'],
      ],
    },
    {
      id: 'Via ferrata',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 100%, 100%)',
        'line-dasharray': [0.5, 2],
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          14,
          1.7,
          18,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'via_ferrata'],
      ],
    },
    {
      id: 'Via ferrata symbol',
      type: 'symbol',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 17,
      layout: {
        'icon-anchor': 'bottom',
        'symbol-placement': 'line',
        'symbol-spacing': 20,
        'text-field': '.',
        'text-font': ['Roboto Bold', 'Noto Sans Bold'],
        'text-size': 16,
        visibility: 'visible',
      },
      paint: {
        'text-color': 'hsl(10,98%,40%)',
        'text-halo-color': 'hsl(0,0%,100%)',
        'text-halo-width': 1,
      },
      filter: ['==', 'class', 'via_ferrata'],
    },
    {
      id: 'Bicycle longdistance',
      type: 'line',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 5,
      layout: {
        'line-cap': 'round',
        'line-join': 'miter',
        'line-miter-limit': 3,
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(307, 100%, 63%)',
        'line-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          13,
          0,
          14,
          -1,
          17,
          -7,
        ],
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          5,
          0.5,
          8,
          1.5,
          10,
          2,
          12,
          2.5,
          14,
          2,
          18,
          3,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'network', 'icn', 'ncn'],
        ['has', 'ref'],
      ],
    },
    {
      id: 'Minor lift',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 60%)',
        'line-width': {
          base: 1,
          stops: [
            [11, 1],
            [19, 2.5],
          ],
        },
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'aerialway'],
        ['in', 'subclass', 'drag_lift', 'j-bar', 'platter', 't-bar'],
      ],
    },
    {
      id: 'Minor lift dash',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 60%)',
        'line-dasharray': [0.05, 3],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          3,
          19,
          6,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'aerialway'],
        ['in', 'subclass', 'drag_lift', 'j-bar', 'platter', 't-bar'],
      ],
    },
    {
      id: 'Chair lift',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 55%)',
        'line-width': {
          base: 1,
          stops: [
            [11, 1],
            [19, 2.5],
          ],
        },
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'aerialway'],
        ['in', 'subclass', 'chair_lift', 'mixed_lift'],
      ],
    },
    {
      id: 'Chair lift dash',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 55%)',
        'line-dasharray': [1, 3],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          3,
          19,
          5,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['==', 'class', 'aerialway'],
        ['in', 'subclass', 'chair_lift', 'mixed_lift'],
      ],
    },
    {
      id: 'Cable car',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 45%)',
        'line-width': {
          base: 1,
          stops: [
            [11, 1],
            [19, 2.5],
          ],
        },
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'subclass', 'cable_car', 'funicular', 'gondola'],
      ],
    },
    {
      id: 'Cable car dash',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'transportation',
      minzoom: 12,
      layout: {
        'line-cap': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(0, 0%, 45%)',
        'line-dasharray': [2, 3],
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          11,
          3,
          19,
          5,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'subclass', 'cable_car', 'funicular', 'gondola'],
      ],
    },
    {
      id: 'Aerialway labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'transportation_name',
      minzoom: 13,
      layout: {
        'icon-offset': [0, 0],
        'symbol-placement': 'line',
        'symbol-spacing': 250,
        'text-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0,
        'text-offset': [
          'match',
          ['get', 'subclass'],
          'ferry',
          ['literal', [0, 0.8]],
          'pedestrian',
          ['literal', [0, -0.1]],
          ['literal', [0, 0.15]],
        ],
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          13,
          ['match', ['get', 'class'], 'track', 12, 10],
          14,
          ['match', ['get', 'class'], 'track', 13, 11],
          16,
          13,
        ],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'text-color': 'hsl(0, 0%, 30%)',
        'text-halo-blur': 0,
        'text-halo-color': 'hsl(0, 100%, 100%)',
        'text-halo-width': 1.5,
      },
      filter: ['==', 'class', 'aerialway'],
    },
    {
      id: 'Road labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'transportation_name',
      minzoom: 8,
      layout: {
        'icon-offset': [0, 0],
        'symbol-placement': 'line',
        'symbol-spacing': 250,
        'text-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Regular', 'Noto Sans Regular'],
        'text-offset': [
          'match',
          ['get', 'subclass'],
          'ferry',
          ['literal', [0, 0.8]],
          'pedestrian',
          ['literal', [0, -0.1]],
          ['literal', [0, 0.15]],
        ],
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          13,
          ['match', ['get', 'class'], 'track', 12, 10],
          14,
          ['match', ['get', 'class'], 'track', 13, 11],
          16,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'text-color': 'hsl(0, 0%, 20%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsla(0, 100%, 100%, 0.9)',
        'text-halo-width': 1.5,
      },
      filter: ['!in', 'class', 'aerialway', 'ferry', 'service', 'bus_guideway'],
    },
    {
      id: 'Other border',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'boundary',
      minzoom: 3,
      maxzoom: 13,
      layout: {
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': [
          'interpolate',
          ['linear'],
          ['zoom'],
          3,
          'hsl(120, 2%, 55%)',
          12,
          'hsl(120, 2%, 65%)',
        ],
        'line-dasharray': [5, 1],
        'line-opacity': 1,
        'line-width': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          4,
          0.3,
          5,
          0.6,
          12,
          1,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['in', 'admin_level', 3, 4, 5, 6, 7, 8, 9, 10],
        ['==', 'maritime', 0],
      ],
    },
    {
      id: 'Disputed border',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'boundary',
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(120, 2%, 50%)',
        'line-dasharray': [2, 2],
        'line-opacity': ['interpolate', ['linear'], ['zoom'], 4, 0.6, 6, 1],
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          0,
          0.4,
          3,
          0.9,
          5,
          1.3,
          12,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', 'admin_level', 2],
        ['==', 'disputed', 1],
        ['==', 'maritime', 0],
      ],
    },
    {
      id: 'Country border',
      type: 'line',
      source: 'maptiler_planet',
      'source-layer': 'boundary',
      layout: {
        'line-cap': 'round',
        'line-join': 'round',
        visibility: 'visible',
      },
      paint: {
        'line-color': 'hsl(120, 2%, 50%)',
        'line-opacity': ['interpolate', ['linear'], ['zoom'], 4, 0.6, 6, 1],
        'line-width': [
          'interpolate',
          ['linear'],
          ['zoom'],
          0,
          0.4,
          3,
          0.9,
          5,
          1.3,
          12,
          3,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', 'admin_level', 2],
        ['==', 'disputed', 0],
        ['==', 'maritime', 0],
      ],
    },
    {
      id: 'River labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'waterway',
      minzoom: 13,
      layout: {
        'symbol-placement': 'line',
        'symbol-spacing': 350,
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Medium Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0.1,
        'text-max-width': 6,
        'text-offset': [0, 0],
        'text-rotation-alignment': 'map',
        'text-size': {
          stops: [
            [6, 11],
            [16, 14],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(214, 85%, 46%)',
        'icon-halo-blur': 1.6,
        'icon-halo-color': 'hsla(207, 100%, 96%, 0.85)',
        'icon-halo-width': 1,
        'text-color': 'hsl(214, 85%, 46%)',
        'text-halo-blur': 1.6,
        'text-halo-color': 'hsla(207, 100%, 96%, 0.85)',
        'text-halo-width': 1,
      },
      filter: ['has', 'name'],
    },
    {
      id: 'Lakeline labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'water_name',
      minzoom: 0,
      layout: {
        'symbol-placement': 'line',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0.1,
        'text-max-width': 5,
        'text-size': {
          stops: [
            [10, 12],
            [14, 16],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(214, 85%, 46%)',
        'icon-halo-blur': 1.6,
        'icon-halo-color': 'hsla(206, 100%, 85%, 0.4)',
        'icon-halo-width': 1.4,
        'text-color': 'hsl(214, 85%, 46%)',
        'text-halo-blur': 1.6,
        'text-halo-color': 'hsla(206, 100%, 85%, 0.4)',
        'text-halo-width': 1.4,
      },
      metadata: {},
    },
    {
      id: 'Ocean labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'water_name',
      minzoom: 0,
      maxzoom: 4,
      layout: {
        'icon-anchor': 'center',
        'text-field': '{name:en}',
        'text-font': ['Roboto Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0.1,
        'text-max-width': 6,
        'text-optional': true,
        'text-size': ['interpolate', ['linear', 1], ['zoom'], 1, 13, 3, 16],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'icon-halo-color': 'hsla(206, 100%, 85%, 0.4)',
        'text-color': {
          stops: [
            [6, 'hsl(216, 47%, 61%)'],
            [10, 'hsl(214, 85%, 46%)'],
          ],
        },
        'text-halo-blur': 1.6,
        'text-halo-color': 'hsla(206, 100%, 85%, 0.4)',
        'text-halo-width': 1.4,
        'text-opacity': 1,
      },
      metadata: {},
      filter: ['all', ['==', 'class', 'ocean'], ['has', 'name']],
    },
    {
      id: 'Sea labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'water_name',
      minzoom: 3,
      layout: {
        'icon-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0.1,
        'text-max-width': 6,
        'text-optional': true,
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          1,
          11,
          3,
          14,
          9,
          18,
          14,
          20,
        ],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'text-color': {
          stops: [
            [6, 'hsl(216, 47%, 61%)'],
            [10, 'hsl(214, 85%, 46%)'],
          ],
        },
        'text-halo-blur': 1.6,
        'text-halo-color': 'hsla(206, 100%, 85%, 0.4)',
        'text-halo-width': 1.4,
        'text-opacity': 1,
      },
      metadata: {},
      filter: ['all', ['==', 'class', 'sea'], ['has', 'name']],
    },
    {
      id: 'Lake labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'water_name',
      minzoom: 9,
      layout: {
        'icon-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Italic', 'Noto Sans Italic'],
        'text-letter-spacing': 0.1,
        'text-max-width': 6,
        'text-optional': true,
        'text-size': ['interpolate', ['linear', 1], ['zoom'], 9, 10, 22, 14],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(214, 85%, 46%)',
        'icon-halo-blur': 1,
        'icon-halo-color': 'hsla(207, 100%, 96%, 0.5)',
        'icon-halo-width': 1.4,
        'text-color': 'hsl(214, 85%, 46%)',
        'text-halo-blur': 1,
        'text-halo-color': 'hsla(207, 100%, 96%, 0.5)',
        'text-halo-width': 1.4,
        'text-opacity': 1,
      },
      metadata: {},
      filter: ['all', ['==', 'class', 'lake'], ['has', 'name']],
    },
    {
      id: 'Outdoor shop',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 17,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': 'outdoorSprite:outdoor',
        'icon-offset': [0, 0],
        'icon-optional': false,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['==', 'class', 'shop'],
        ['==', 'subclass', 'outdoor'],
      ],
    },
    {
      id: 'Sport',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'coalesce',
            ['image', ['get', 'subclass']],
            ['image', ['get', 'class']],
            ['image', ''],
          ],
        ],
        'icon-optional': false,
        'symbol-sort-key': [
          'case',
          ['==', ['get', 'class'], 'stadium'],
          0,
          ['to-number', ['get', 'rank']],
        ],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-offset': [
          'match',
          ['get', 'class'],
          'sports_centre',
          ['literal', [0, -1]],
          'fitness_centre',
          ['literal', [0, -1]],
          ['literal', [0, 0]],
        ],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          14,
          [
            'match',
            ['get', 'class'],
            ['stadium', 'swimming', 'swimming_pool', 'water_park'],
            1,
            0,
          ],
          15,
          [
            'match',
            ['get', 'class'],
            [
              'fitness_centre',
              'golf',
              'sports_centre',
              'stadium',
              'swimming',
              'swimming_pool',
              'water_park',
            ],
            1,
            0,
          ],
          17,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          14,
          0,
          15,
          [
            'match',
            ['get', 'class'],
            ['stadium', 'swimming', 'swimming_pool', 'water_park'],
            1,
            0,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            [
              'fitness_centre',
              'golf',
              'sports_centre',
              'stadium',
              'swimming',
              'swimming_pool',
              'water_park',
            ],
            1,
            0,
          ],
          17,
          1,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'in',
          'class',
          'fitness_centre',
          'golf',
          'pitch',
          'playground',
          'sports_centre',
          'stadium',
          'swimming',
          'swimming_pool',
          'water_park',
        ],
        ['has', 'name'],
      ],
    },
    {
      id: 'Outdoor water',
      type: 'symbol',
      source: 'outdoor',
      'source-layer': 'outdoor_poi',
      minzoom: 12,
      layout: {
        'icon-anchor': 'center',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            ['drinking_water', 'fountain', 'hot_spring', 'spring'],
            ['get', 'class'],
            'waterfall',
            'triangle',
            '',
          ],
        ],
        'icon-offset': [0, 0],
        'icon-optional': false,
        'icon-rotate': ['match', ['get', 'class'], 'waterfall', 180, 0],
        'icon-size': 0.75,
        'icon-text-fit': 'none',
        'symbol-sort-key': ['match', ['get', 'class'], 'waterfall', 0, 1],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': 10,
        'text-optional': true,
        'text-padding': 30,
        'text-rotate': 0,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(207, 58%, 49%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          12,
          ['match', ['get', 'class'], 'waterfall', 1, 0],
          16,
          [
            'match',
            ['get', 'class'],
            ['fountain', 'hot_spring', 'waterfall'],
            1,
            0,
          ],
          17,
          1,
        ],
        'text-color': 'hsl(207, 58%, 49%)',
        'text-halo-blur': 0.2,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          12,
          ['match', ['get', 'class'], 'waterfall', 1, 0],
          16,
          [
            'match',
            ['get', 'class'],
            ['fountain', 'hot_spring', 'waterfall'],
            1,
            0,
          ],
          17,
          1,
        ],
        'text-translate': [0, 7],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'in',
          'class',
          'drinking_water',
          'fountain',
          'hot_spring',
          'spring',
          'waterfall',
        ],
      ],
    },
    {
      id: 'Transport',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            [
              'aerialway',
              'bicycle',
              'bicycle_parking',
              'car',
              'car_rental',
              'car_repair',
              'cycle_barrier',
              'ferry_terminal',
              'harbor',
              'motorcycle_parking',
              'parking',
              'parking_garage',
              'parking_paid',
            ],
            ['get', 'class'],
            ['case', ['has', 'class'], 'dot', ''],
          ],
        ],
        'icon-offset': [0, 0],
        'icon-optional': false,
        'icon-size': ['interpolate', ['linear'], ['zoom'], 14, 0.8, 22, 1],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-line-height': 0.9,
        'text-max-width': 10,
        'text-offset': [0, 0],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          14,
          [
            'match',
            ['get', 'class'],
            ['aerialway', 'ferry_terminal', 'harbor'],
            1,
            0,
          ],
          15,
          [
            'match',
            ['get', 'class'],
            ['aerialway', 'ferry_terminal', 'harbor'],
            1,
            0,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            ['aerialway', 'ferry_terminal', 'harbor', 'parking'],
            1,
            0,
          ],
          17,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          14,
          0,
          15,
          [
            'match',
            ['get', 'class'],
            ['aerialway', 'ferry_terminal', 'harbor'],
            1,
            0,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            ['aerialway', 'ferry_terminal', 'harbor', 'parking'],
            1,
            0,
          ],
          17,
          1,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'in',
          'class',
          'aerialway',
          'bicycle',
          'bicycle_parking',
          'car',
          'car_rental',
          'car_repair',
          'cycle_barrier',
          'ferry_terminal',
          'harbor',
          'motorcycle_parking',
          'parking',
          'parking_garage',
          'parking_paid',
        ],
      ],
    },
    {
      id: 'Food',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 15,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            ['bar', 'beer', 'cafe', 'fast_food', 'restaurant'],
            ['get', 'class'],
            '',
          ],
        ],
        'icon-optional': false,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-optional': true,
        'text-size': {
          stops: [
            [16, 11],
            [22, 14],
          ],
        },
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          15,
          ['match', ['get', 'class'], ['restaurant'], 1, 0],
          16,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          15,
          0,
          16,
          ['match', ['get', 'class'], ['restaurant'], 1, 0],
          17,
          1,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'all',
          ['in', 'class', 'bar', 'beer', 'cafe', 'fast_food', 'restaurant'],
          ['has', 'name'],
        ],
      ],
    },
    {
      id: 'Park labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-anchor': 'bottom',
        'icon-image': 'outdoorSprite:park',
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': 6,
        'text-optional': true,
        'text-padding': 30,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(99, 64%, 25%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'text-color': 'hsl(99, 64%, 25%)',
        'text-halo-blur': 0.2,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
      },
      filter: ['all', ['==', 'class', 'park'], ['has', 'name']],
    },
    {
      id: 'Healthcare',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-anchor': 'center',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            ['hospital', 'pharmacy'],
            ['get', 'class'],
            '',
          ],
        ],
        'icon-optional': false,
        'symbol-sort-key': [
          'case',
          ['==', ['get', 'subclass'], 'hospital'],
          0,
          ['to-number', ['get', 'rank']],
        ],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': 8,
        'text-offset': [0, 0.8],
        'text-optional': true,
        'text-padding': 2,
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          16,
          11,
          22,
          14,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(6, 93%, 28%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0,0%,100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['hospital'], 1, 0],
          17,
          1,
        ],
        'text-color': 'hsl(6, 93%, 28%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0,0%,100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['hospital'], 1, 0],
          17,
          1,
        ],
      },
      metadata: {},
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['in', 'class', 'hospital', 'pharmacy'],
        ['has', 'name'],
      ],
    },
    {
      id: 'Tourism',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            [
              'attraction',
              'campsite',
              'lodging',
              'picnic_site',
              'shelter',
              'town_hall',
              'zoo',
            ],
            ['get', 'class'],
            '',
          ],
        ],
        'icon-offset': [0, 0],
        'icon-optional': false,
        'icon-size': 1,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['attraction', 'campsite', 'zoo'], 1, 0],
          16,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['attraction', 'campsite', 'zoo'], 1, 0],
          16,
          1,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'in',
          'class',
          'attraction',
          'campsite',
          'lodging',
          'picnic_site',
          'shelter',
          'town_hall',
          'zoo',
        ],
        ['!in', 'subclass', 'dormitory'],
      ],
    },
    {
      id: 'Culture',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'coalesce',
            ['image', ['get', 'subclass']],
            ['image', ['get', 'class']],
            ['image', 'square'],
          ],
        ],
        'icon-optional': false,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['museum', 'place_of_worship'], 1, 0],
          16,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          0,
          14,
          ['match', ['get', 'class'], ['museum', 'place_of_worship'], 1, 0],
          16,
          1,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'all',
          [
            'in',
            'class',
            'art_gallery',
            'cemetery',
            'monument',
            'museum',
            'place_of_worship',
          ],
          ['has', 'name'],
        ],
      ],
    },
    ...removeIconOpacity({
      id: 'Outdoor',
      metadata: { clickableWithOsmId: true },
      type: 'symbol',
      source: 'outdoor',
      'source-layer': 'outdoor_poi',
      minzoom: 13,
      layout: {
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'class'],
            [
              'bench',
              'board',
              'guidepost',
              'hut',
              'monument',
              'observation_tower',
              'picnic_site',
              'shelter',
              'viewpoint',
            ],
            ['get', 'class'],
            'camp_site',
            'campsite',
            'cave_entrance',
            'square',
            'fireplace',
            'campfire',
            ['first_aid', 'mountain_rescue'],
            'hospital',
            ['fortress', 'ruins'],
            'castle',
            'info_office',
            'information',
            'map',
            'board',
            'memorial',
            'statue',
            ['case', ['has', 'class'], 'dot', ''],
          ],
        ],
        'icon-optional': false,
        'icon-size': ['interpolate', ['linear'], ['zoom'], 14, 0.8, 22, 1],
        'symbol-sort-key': [
          'match',
          ['get', 'class'],
          'camp_site',
          0,
          'guidepost',
          0,
          'info_office',
          0,
          'hut',
          0,
          'viewpoint',
          0,
          'cave_entrance',
          0,
          1,
        ],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': 6,
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          0,
          0,
          13,
          ['match', ['get', 'class'], ['guidepost'], 1, 0],
          14,
          [
            'match',
            ['get', 'class'],
            [
              'info_office',
              'cave_entrance',
              'guidepost',
              'fortress',
              'hut',
              'ruins',
              'viewpoint',
            ],
            1,
            0,
          ],
          15,
          [
            'match',
            ['get', 'class'],
            [
              'info_office',
              'camp_site',
              'cave_entrance',
              'fortress',
              'guidepost',
              'hut',
              'ruins',
              'memorial',
              'monument',
              'viewpoint',
            ],
            1,
            0,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            [
              'camp_site',
              'cave_entrance',
              'first_aid',
              'fortress',
              'guidepost',
              'hut',
              'info_office',
              'memorial',
              'monument',
              'mountain_rescue',
              'rental',
              'ruins',
              'shelter',
              'viewpoint',
            ],
            1,
            0,
          ],
          17,
          ['match', ['get', 'class'], ['bench'], 0, 1],
          18,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          0,
          0,
          13,
          ['match', ['get', 'class'], ['guidepost'], 1, 0],
          14,
          [
            'match',
            ['get', 'class'],
            ['info_office', 'cave_entrance', 'fortress', 'guidepost', 'ruins'],
            1,
            0,
          ],
          15,
          [
            'match',
            ['get', 'class'],
            [
              'info_office',
              'camp_site',
              'cave_entrance',
              'fortress',
              'guidepost',
              'hut',
              'ruins',
              'memorial',
              'monument',
              'viewpoint',
            ],
            1,
            0,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            [
              'camp_site',
              'cave_entrance',
              'first_aid',
              'fortress',
              'guidepost',
              'hut',
              'info_office',
              'memorial',
              'monument',
              'mountain_rescue',
              'rental',
              'ruins',
              'shelter',
              'viewpoint',
            ],
            1,
            0,
          ],
          17,
          ['match', ['get', 'class'], ['board'], 0, 1],
          18,
          1,
        ],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        [
          'in',
          'class',
          'bench',
          'board',
          'camp_site',
          'cave_entrance',
          'fireplace',
          'first_aid',
          'fortress',
          'guidepost',
          'hut',
          'info_office',
          'map',
          'memorial',
          'monument',
          'mountain_rescue',
          'observation_tower',
          'picnic_site',
          'rental',
          'ruins',
          'shelter',
          'viewpoint',
        ],
      ],
    } as LayerSpecification),
    {
      id: 'Station',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 12,
      layout: {
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          [
            'match',
            ['get', 'subclass'],
            ['bus_stop', 'subway'],
            ['get', 'subclass'],
            'bus_station',
            'bus_stop',
            'station',
            'railway',
            ['case', ['has', 'subclass'], 'tramway', ''],
          ],
        ],
        'icon-offset': [0, 0],
        'icon-optional': false,
        'icon-size': 1,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-line-height': 0.9,
        'text-max-width': 10,
        'text-offset': [0, 0.2],
        'text-optional': true,
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          14,
          ['match', ['get', 'class'], 'railway', 11, 10],
          16,
          ['match', ['get', 'class'], 'railway', 13, 11],
          22,
          ['match', ['get', 'class'], 'railway', 16, 14],
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(223, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          12,
          ['match', ['get', 'subclass'], 'station', 1, 0],
          13,
          [
            'match',
            ['get', 'subclass'],
            ['station', 'bus_station', 'subway'],
            1,
            0,
          ],
          14,
          [
            'match',
            ['get', 'subclass'],
            ['station', 'bus_station', 'bus_stop', 'subway', 'tram_stop'],
            1,
            0,
          ],
          15,
          1,
        ],
        'text-color': 'hsl(223, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 100%, 100%)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          12,
          ['match', ['get', 'subclass'], 'station', 1, 0],
          16,
          1,
        ],
      },
      metadata: {},
      filter: ['all', ['in', 'class', 'bus', 'railway'], ['has', 'name']],
    },
    {
      id: 'Castle',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'poi',
      minzoom: 14,
      layout: {
        'icon-allow-overlap': false,
        'icon-anchor': 'bottom',
        'icon-image': 'outdoorSprite:castle',
        'icon-offset': [0, 0],
        'icon-optional': false,
        'icon-size': 1,
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-allow-overlap': false,
        'text-anchor': 'top',
        'text-field': '{name}',
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-optional': true,
        'text-size': ['interpolate', ['linear'], ['zoom'], 16, 11, 22, 14],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-blur': 0.5,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.5,
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.5,
      },
      filter: ['all', ['==', 'class', 'castle']],
    },
    {
      id: 'Volcano labels (US)',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 9,
      layout: {
        'icon-image': 'outdoorSprite:triangle',
        'icon-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          9,
          ['case', ['==', ['get', 'rank'], 1], 0.9, 0.7],
          14,
          ['case', ['==', ['get', 'rank'], 1], 1, 0.8],
        ],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': [
          'concat',
          ['coalesce', ['get', 'name:en'], ['get', 'name']],
          '\n',
          ['get', 'ele_ft'],
          ' ft',
        ],
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': {
          stops: [
            [12, 4],
            [15, 4],
          ],
        },
        'text-offset': [0, 0.7],
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          7,
          9,
          11,
          10,
          13,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(32, 100%, 40%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(32, 100%, 40%)',
        'text-halo-blur': {
          stops: [
            [11, 2],
            [15, 0],
          ],
        },
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['in', 'class', 'volcano'],
        ['has', 'name'],
        ['has', 'customary_ft'],
      ],
    },
    {
      id: 'Volcano labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 9,
      layout: {
        'icon-image': 'outdoorSprite:triangle',
        'icon-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          9,
          ['case', ['==', ['get', 'rank'], 1], 0.9, 0.7],
          14,
          ['case', ['==', ['get', 'rank'], 1], 1, 0.8],
        ],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': [
          'concat',
          ['coalesce', ['get', 'name:en'], ['get', 'name']],
          '\n',
          ['get', 'ele'],
          ' m',
        ],
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': {
          stops: [
            [12, 4],
            [15, 4],
          ],
        },
        'text-offset': [0, 0.7],
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          7,
          9,
          11,
          10,
          13,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(32, 100%, 40%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(32, 100%, 40%)',
        'text-halo-blur': {
          stops: [
            [11, 2],
            [15, 0],
          ],
        },
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['in', 'class', 'volcano'],
        ['has', 'name'],
        ['!has', 'customary_ft'],
      ],
    },
    {
      id: 'Peak labels (US)',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 9,
      layout: {
        'icon-image': 'outdoorSprite:triangle',
        'icon-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          9,
          ['case', ['==', ['get', 'rank'], 1], 0.9, 0.7],
          14,
          ['case', ['==', ['get', 'rank'], 1], 1, 0.8],
        ],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': [
          'concat',
          ['coalesce', ['get', 'name:en'], ['get', 'name']],
          '\n',
          ['get', 'ele_ft'],
          ' ft',
        ],
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': {
          stops: [
            [12, 4],
            [15, 4],
          ],
        },
        'text-offset': [0, 0.7],
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          7,
          9,
          11,
          10,
          13,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(23, 57%, 24%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(23, 57%, 24%)',
        'text-halo-blur': {
          stops: [
            [11, 2],
            [15, 0],
          ],
        },
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['in', 'class', 'peak'],
        ['has', 'name'],
        ['has', 'customary_ft'],
      ],
    },
    {
      id: 'Peak labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'mountain_peak',
      minzoom: 9,
      layout: {
        'icon-image': 'outdoorSprite:triangle',
        'icon-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          9,
          ['case', ['==', ['get', 'rank'], 1], 0.9, 0.7],
          14,
          ['case', ['==', ['get', 'rank'], 1], 1, 0.8],
        ],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'top',
        'text-field': [
          'concat',
          ['coalesce', ['get', 'name:en'], ['get', 'name']],
          '\n',
          ['get', 'ele'],
          ' m',
        ],
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-max-width': {
          stops: [
            [12, 4],
            [15, 4],
          ],
        },
        'text-offset': [0, 0.7],
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          7,
          9,
          11,
          10,
          13,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(23, 57%, 24%)',
        'icon-halo-blur': 0.2,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
        'text-color': 'hsl(23, 57%, 24%)',
        'text-halo-blur': {
          stops: [
            [11, 2],
            [15, 0],
          ],
        },
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': ['interpolate', ['linear'], ['zoom'], 9, 1, 14, 1.5],
      },
      filter: [
        'all',
        ['==', '$type', 'Point'],
        ['in', 'class', 'peak'],
        ['has', 'name'],
        ['!has', 'customary_ft'],
      ],
    },
    {
      id: 'Place labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 8,
      layout: {
        'text-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Regular', 'Noto Sans Regular'],
        'text-letter-spacing': [
          'match',
          ['get', 'class'],
          ['suburb', 'neighborhood', 'neighbourhood', 'quarter', 'island'],
          0.2,
          0,
        ],
        'text-max-width': ['match', ['get', 'class'], ['island'], 6, 8],
        'text-offset': [0, -0.2],
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          11,
          [
            'match',
            ['get', 'class'],
            [
              'suburb',
              'neighbourhood',
              'quarter',
              'hamlet',
              'isolated_dwelling',
            ],
            9,
            'island',
            8,
            12,
          ],
          16,
          [
            'match',
            ['get', 'class'],
            [
              'suburb',
              'neighbourhood',
              'quarter',
              'hamlet',
              'isolated_dwelling',
            ],
            15,
            'island',
            11,
            16,
          ],
        ],
        'text-transform': [
          'match',
          ['get', 'class'],
          ['suburb', 'neighborhood', 'neighbourhood', 'quarter', 'island'],
          'uppercase',
          'none',
        ],
        visibility: 'visible',
      },
      paint: {
        'text-color': 'hsl(0, 0%, 26%)',
        'text-halo-blur': 0.1,
        'text-halo-color': 'hsla(0, 100%, 100%, 0.8)',
        'text-halo-width': 1.2,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          8,
          ['match', ['get', 'class'], ['island'], 0, 1],
          9,
          ['match', ['get', 'class'], ['island'], 1, 1],
          18,
          0,
        ],
      },
      metadata: {},
      filter: [
        '!in',
        'class',
        'city',
        'continent',
        'country',
        'province',
        'state',
        'town',
        'village',
      ],
    },
    {
      id: 'Village labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 8,
      maxzoom: 17,
      layout: {
        'icon-allow-overlap': true,
        'icon-image': 'outdoorSprite:dot',
        'icon-size': 0.5,
        'text-anchor': 'bottom',
        'text-field': '{name}',
        'text-font': ['Roboto Regular', 'Noto Sans Regular'],
        'text-letter-spacing': 0,
        'text-max-width': 8,
        'text-offset': [0, -0.2],
        'text-size': ['interpolate', ['linear', 1], ['zoom'], 11, 12, 16, 18],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(0, 0%, 100%)',
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsl(0, 0%, 35%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(240, 6%, 13%)',
        'text-halo-color': 'hsla(0, 100%, 100%, 0.8)',
        'text-halo-width': 1.6,
      },
      filter: ['==', 'class', 'village'],
    },
    {
      id: 'Airport labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'aerodrome_label',
      minzoom: 8,
      layout: {
        'icon-anchor': 'bottom',
        'icon-image': [
          'concat',
          'outdoorSprite:',
          ['match', ['get', 'class'], 'other', 'airfield', 'airport'],
        ],
        'icon-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          9,
          [
            'match',
            ['get', 'class'],
            'other',
            ['literal', [0, 0]],
            ['literal', [0, 0]],
          ],
          12,
          [
            'match',
            ['get', 'class'],
            'other',
            ['literal', [0, 0]],
            ['literal', [0, 0]],
          ],
        ],
        'icon-padding': 2,
        'icon-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          8,
          ['case', ['==', ['get', 'class'], 'other'], 0.5, 0.6],
          16,
          ['case', ['==', ['get', 'class'], 'other'], 1.3, 1.5],
        ],
        'text-anchor': 'top',
        'text-field': [
          'step',
          ['zoom'],
          ' ',
          8.99,
          ' ',
          9,
          ['coalesce', ['get', 'iata'], ['get', 'icao'], ['get', 'name']],
          12,
          ['get', 'name'],
        ],
        'text-font': ['Roboto Condensed Regular', 'Noto Sans Regular'],
        'text-line-height': 1,
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          10,
          9,
          12,
          11,
          14,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(27, 97%, 14%)',
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1,
        'icon-opacity': [
          'step',
          ['zoom'],
          1,
          8,
          ['match', ['get', 'class'], ['international', 'regional'], 1, 0],
          11,
          1,
        ],
        'text-color': 'hsl(27, 97%, 14%)',
        'text-halo-blur': 0.5,
        'text-halo-color': 'hsl(0, 100%, 100%)',
        'text-halo-width': 1,
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          8,
          ['match', ['get', 'class'], ['international', 'regional'], 1, 0],
          11,
          1,
        ],
      },
      metadata: {},
      filter: ['in', 'class', 'international', 'other', 'regional'],
    },
    {
      id: 'Longdistance trail labels',
      type: 'symbol',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 11,
      layout: {
        'symbol-placement': 'line',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': [
          'step',
          ['zoom'],
          ['literal', ['Roboto Bold', 'Noto Sans Bold']],
          15,
          ['literal', ['Roboto Regular', 'Noto Sans Regular']],
        ],
        'text-size': [
          'interpolate',
          ['linear'],
          ['zoom'],
          12,
          10,
          14,
          11,
          16,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(10, 98%, 41%)',
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 2,
        'text-color': 'hsl(10, 98%, 41%)',
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 2,
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'network', 'iwn', 'nwn'],
        ['has', 'ref'],
      ],
    },
    {
      id: 'Bicycle longdistance labels',
      type: 'symbol',
      source: 'outdoor',
      'source-layer': 'trail',
      minzoom: 11,
      layout: {
        'symbol-placement': 'line',
        'text-anchor': 'center',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': [
          'step',
          ['zoom'],
          ['literal', ['Roboto Bold', 'Noto Sans Bold']],
          15,
          ['literal', ['Roboto Regular', 'Noto Sans Regular']],
        ],
        'text-offset': [0, 0.2],
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          12,
          10,
          14,
          11,
          16,
          13,
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(306, 80%, 64%)',
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 2,
        'text-color': 'hsl(306, 80%, 64%)',
        'text-halo-blur': 0,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 2,
      },
      filter: [
        'all',
        ['==', '$type', 'LineString'],
        ['in', 'network', 'icn', 'ncn'],
        ['has', 'ref'],
      ],
    },
    {
      id: 'Protected area labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'park',
      minzoom: 11,
      maxzoom: 17,
      layout: {
        'symbol-placement': 'point',
        'symbol-spacing': 750,
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Condensed Bold', 'Noto Sans Bold'],
        'text-ignore-placement': false,
        'text-padding': ['interpolate', ['linear'], ['zoom'], 0, 30, 16, 200],
        'text-size': ['interpolate', ['linear'], ['zoom'], 9, 10, 16, 12],
        'text-transform': 'uppercase',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(99, 64%, 25%)',
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.2,
        'text-color': 'hsl(99, 64%, 25%)',
        'text-halo-blur': 0,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.2,
      },
      filter: [
        '!in',
        'class',
        'aire_dâ€™adhÃ©sion_de_parc_national',
        'coeur',
        'narodni_park',
        'national_nature_park',
        'national_park',
        'nationalpark',
        'natural_parc',
        'nÃ¡rodnÃ­_park',
        'nÃ¡rodnÃ½_park',
        'ochrannÃ©_pÃ¡smo_nÃ¡rodnÃ©ho_parku',
        'parc_national',
        'parc_naturel_national',
        'parc_naturel_rÃ©gional',
        'parc_naÈ›ional',
        'parco_nazionale',
        'parque_nacional',
        'Ð½Ð°Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹_Ð¿Ð°Ñ€Ðº',
      ],
    },
    {
      id: 'Town labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 6,
      maxzoom: 16,
      layout: {
        'icon-anchor': 'top',
        'icon-image': 'outdoorSprite:dot',
        'icon-size': 0.7,
        'text-anchor': 'bottom',
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Medium', 'Noto Sans Regular'],
        'text-max-width': 8,
        'text-offset': [0, 0.1],
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          6,
          ['case', ['<', ['get', 'rank'], 12], 11, 10],
          9,
          ['case', ['<', ['get', 'rank'], 15], 13, 12],
          16,
          ['case', ['<', ['get', 'rank'], 15], 22, 20],
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(0, 0%, 100%)',
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsl(0, 0%, 35%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(240, 6%, 13%)',
        'text-halo-color': 'hsla(0, 100%, 100%, 0.8)',
        'text-halo-width': 1.6,
      },
      metadata: {},
      filter: ['==', 'class', 'town'],
    },
    {
      id: 'State labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 3,
      maxzoom: 9,
      layout: {
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Medium', 'Noto Sans Regular'],
        'text-letter-spacing': 0.1,
        'text-max-width': 8,
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          3,
          ['case', ['<', ['get', 'rank'], 2], 8, 7],
          6,
          ['case', ['<', ['get', 'rank'], 2], 11, 9],
          7,
          ['case', ['<', ['get', 'rank'], 2], 12, 10],
        ],
        'text-transform': 'uppercase',
        visibility: 'visible',
      },
      paint: {
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsla(0, 100%, 100%, 0.85)',
        'icon-halo-width': 1.5,
        'text-color': 'hsl(48, 4%, 44%)',
        'text-halo-blur': 0,
        'text-halo-color': 'hsla(0, 100%, 100%, 0.85)',
        'text-halo-width': 1.5,
        'text-opacity': [
          'step',
          ['zoom'],
          0,
          3,
          ['case', ['<', ['get', 'rank'], 3], 1, 0],
          8,
          ['case', ['==', ['get', 'rank'], 0], 0, 1],
        ],
      },
      filter: ['all', ['in', 'class', 'state', 'province'], ['<', 'rank', 6]],
    },
    {
      id: 'National park labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'park',
      minzoom: 6,
      maxzoom: 12,
      layout: {
        'symbol-spacing': 550,
        'text-field': ['coalesce', ['get', 'name:en'], ['get', 'name']],
        'text-font': ['Roboto Condensed Bold', 'Noto Sans Bold'],
        'text-padding': {
          stops: [
            [6, 39],
            [14, 99],
          ],
        },
        'text-size': [
          'interpolate',
          ['exponential', 1],
          ['zoom'],
          6,
          9,
          9,
          11,
          12,
          13,
        ],
        'text-transform': 'uppercase',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(99, 64%, 25%)',
        'icon-halo-blur': 0,
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1.2,
        'text-color': 'hsl(99, 64%, 25%)',
        'text-halo-blur': 0,
        'text-halo-color': 'hsl(0, 0%, 100%)',
        'text-halo-width': 1.2,
      },
      filter: [
        'in',
        'class',
        'aire_dâ€™adhÃ©sion_de_parc_national',
        'coeur',
        'narodni_park',
        'national_nature_park',
        'national_park',
        'nationalpark',
        'natural_parc',
        'nÃ¡rodnÃ­_park',
        'nÃ¡rodnÃ½_park',
        'ochrannÃ©_pÃ¡smo_nÃ¡rodnÃ©ho_parku',
        'parc_national',
        'parc_naturel_national',
        'parc_naturel_rÃ©gional',
        'parc_naÈ›ional',
        'parco_nazionale',
        'parque_nacional',
        'Ð½Ð°Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹_Ð¿Ð°Ñ€Ðº',
      ],
    },
    {
      id: 'City labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 5,
      maxzoom: 16,
      layout: {
        'icon-allow-overlap': false,
        'icon-image': 'outdoorSprite:circle-dot',
        'icon-offset': [
          'interpolate',
          ['linear'],
          ['zoom'],
          6,
          ['literal', [0, 0]],
          10,
          ['literal', [0, -2]],
        ],
        'icon-optional': false,
        'icon-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          6,
          ['match', ['get', 'capital'], 2, 0.7, 0.6],
          14,
          ['match', ['get', 'capital'], 2, 0.9, 0.7],
        ],
        'symbol-sort-key': ['to-number', ['get', 'rank']],
        'text-anchor': 'bottom',
        'text-field': '{name:en}',
        'text-font': ['Roboto Medium', 'Noto Sans Regular'],
        'text-max-width': 8,
        'text-padding': 2,
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          5,
          ['case', ['==', ['get', 'capital'], 2], 16, 12],
          7,
          ['case', ['==', ['get', 'capital'], 2], 18, 14],
          9,
          ['case', ['==', ['get', 'capital'], 2], 25, 22],
          11,
          ['case', ['==', ['get', 'capital'], 2], 28, 24],
        ],
        visibility: 'visible',
      },
      paint: {
        'icon-halo-color': 'hsl(0, 0%, 100%)',
        'icon-halo-width': 1,
        'text-color': 'hsl(240, 6%, 13%)',
        'text-halo-color': 'hsla(0, 100%, 100%, 0.8)',
        'text-halo-width': 1.6,
        'text-translate': [0, -2],
      },
      metadata: {},
      filter: ['==', 'class', 'city'],
    },
    {
      id: 'Country labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      minzoom: 2,
      maxzoom: 10,
      layout: {
        'text-field': '{name:en}',
        'text-font': ['Roboto Bold', 'Noto Sans Bold'],
        'text-line-height': 1.2,
        'text-max-width': ['case', ['<', ['get', 'rank'], 2], 8.25, 6.25],
        'text-padding': 0,
        'text-size': [
          'interpolate',
          ['linear', 1],
          ['zoom'],
          2,
          ['case', ['<', ['get', 'rank'], 2], 10, 8],
          3,
          [
            'case',
            ['<', ['get', 'rank'], 2],
            12,
            ['>', ['get', 'rank'], 3],
            10,
            9,
          ],
          4,
          [
            'case',
            ['<', ['get', 'rank'], 2],
            16,
            ['>', ['get', 'rank'], 3],
            14,
            12,
          ],
          7,
          [
            'case',
            ['<', ['get', 'rank'], 2],
            22,
            ['>', ['get', 'rank'], 3],
            18,
            16,
          ],
        ],
        'text-transform': 'none',
        visibility: 'visible',
      },
      paint: {
        'text-color': 'hsl(0, 3%, 25%)',
        'text-halo-blur': 1.6,
        'text-halo-color': 'hsla(0, 100%, 100%, 0.8)',
        'text-halo-width': ['case', ['<', ['get', 'rank'], 2], 1.4, 1],
        'text-opacity': [
          'step',
          ['zoom'],
          1,
          2,
          ['case', ['<', ['get', 'rank'], 2], 1, 0],
          3,
          [
            'case',
            ['<', ['get', 'rank'], 2],
            1,
            ['>', ['get', 'rank'], 3],
            1,
            0,
          ],
          4,
          1,
          7,
          ['case', ['<', ['get', 'rank'], 2], 0, 1],
          8,
          [
            'case',
            ['<', ['get', 'rank'], 2],
            0,
            ['>', ['get', 'rank'], 3],
            0,
            1,
          ],
        ],
      },
      metadata: {},
      filter: ['has', 'iso_a2'],
    },
    {
      id: 'Continent labels',
      type: 'symbol',
      source: 'maptiler_planet',
      'source-layer': 'place',
      maxzoom: 2,
      layout: {
        'text-field': '{name:en}',
        'text-font': ['Roboto Bold', 'Noto Sans Bold'],
        'text-justify': 'center',
        'text-padding': 0,
        'text-size': {
          stops: [
            [1, 12],
            [4, 24],
          ],
        },
        'text-transform': 'uppercase',
        visibility: 'visible',
      },
      paint: {
        'icon-color': 'hsl(233, 7%, 24%)',
        'text-color': 'hsl(233, 7%, 24%)',
        'text-halo-color': 'hsl(67,26%,93%)',
        'text-halo-width': 1.3,
      },
      metadata: {},
      filter: ['==', 'class', 'continent'],
    },
    // ...poiLayers,
    ...overpassLayers,
  ],
  bearing: 0,
  sources: OSMAPP_SOURCES,
  sprite: OSMAPP_SPRITE,
} as StyleSpecification);
